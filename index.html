<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PNG ‚Üí OTBM Converter</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<div class="app">
		<!-- Header -->
		<header class="header">
			<div class="header-content">
				<h1 class="logo">
					PNG ‚Üí OTBM
				</h1>
			</div>
		</header>

		<!-- Main Content -->
		<main class="main">
			<!-- Left Panel - Preview -->
			<section class="panel preview-panel">
				<div class="panel-header">
					<h2>IMAGE PREVIEW</h2>
					<span class="image-info" id="imageInfo">No image loaded</span>
				</div>
				
				<div class="preview-controls">
					<div class="zoom-controls">
						<button class="btn btn-small btn-zoom" id="zoomOutBtn" title="Zoom out" aria-label="Zoom out">
							‚àí
						</button>
						<span class="zoom-level" id="zoomLevel">100%</span>
						<button class="btn btn-small btn-zoom" id="zoomInBtn" title="Zoom in" aria-label="Zoom in">
							+
						</button>
						<button class="btn btn-small btn-zoom" id="zoomFitBtn" title="Fit to container" aria-label="Fit to container">
							Fit
						</button>
					</div>
				</div>
				
				<div class="preview-container" id="previewContainer">
					<div class="preview-placeholder" id="previewPlaceholder">
						<div class="placeholder-icon">üñºÔ∏è</div>
						<p>Drop a PNG file here</p>
						<p class="placeholder-sub">or click the button below</p>
					</div>
					<canvas id="previewCanvas"></canvas>
					<div class="pixel-info" id="pixelInfo"></div>
				</div>

				<div class="import-section">
					<input type="file" id="fileInput" accept="image/*" hidden aria-label="Select PNG image file">
					<button class="btn btn-primary" id="importBtn" aria-label="Import PNG image">
						IMPORT PNG
					</button>
				</div>
			</section>

			<!-- Right Panels - Controls -->
			<div class="right-panels">
				<!-- Color Mappings Panel -->
				<section class="panel control-panel">
					<div class="panel-header">
						<h2>COLOR MAPPINGS</h2>
						<span class="color-count" id="colorCount">0 colors</span>
					</div>

					<p class="instructions">
						Assign an ID to each color.<br>
						Each color becomes an item.
					</p>

					<div class="color-toolbar">
						<input type="text" id="colorSearch" class="color-search" placeholder="Search colors..." autocomplete="off" aria-label="Search colors by hex, RGB, or ID">
						<div class="toolbar-buttons">
							<button class="btn btn-small" id="exportMappingsBtn" title="Export color mappings to JSON" aria-label="Export color mappings">
								EXPORT
							</button>
							<button class="btn btn-small" id="importMappingsBtn" title="Import color mappings from JSON" aria-label="Import color mappings">
								IMPORT
							</button>
						</div>
					</div>

					<div class="color-list-container">
						<div class="color-list" id="colorList">
							<div class="empty-state" id="emptyState">
								<p>Import an image to<br>detect colors</p>
							</div>
						</div>
					</div>

					<div class="settings-section">
					<div class="setting-row">
						<label for="clientVersion">Client Version:</label>
						<select id="clientVersion" class="input-select" aria-label="Select Tibia client version">
							<!-- Options will be populated by JavaScript -->
						</select>
					</div>
					
					<div class="setting-row">
						<label for="transparentTileId">Transparent Tile ID:</label>
						<input type="number" id="transparentTileId" value="0" min="0" max="65535" class="input-small" placeholder="0 = skip" aria-label="Tile ID for transparent pixels">
					</div>
					
					<div class="setting-row">
						<label for="zLevel">Z-Level (Floor):</label>
						<input type="number" id="zLevel" value="7" min="0" max="15" class="input-small" aria-label="Floor level (0-15)">
					</div>
					
					<div class="setting-row">
						<label for="offsetX">Offset X:</label>
						<input type="number" id="offsetX" value="0" min="0" class="input-small" aria-label="X coordinate offset">
					</div>
					
					<div class="setting-row">
						<label for="offsetY">Offset Y:</label>
						<input type="number" id="offsetY" value="0" min="0" class="input-small" aria-label="Y coordinate offset">
					</div>
				</div>

				<button class="btn btn-success" id="generateBtn" disabled aria-label="Generate OTBM file">
					GENERATE
				</button>

				<div class="progress-container" id="progressContainer" style="display: none;">
					<div class="progress-bar">
						<div class="progress-fill" id="progressFill"></div>
					</div>
					<div class="progress-text" id="progressText">0%</div>
				</div>

					<div class="status" id="status"></div>
				</section>

				<!-- Favorites Panel -->
				<section class="panel favorites-panel">
					<div class="panel-header">
						<h2>FAVORITES </h2>
						<button class="btn btn-small btn-icon-only" id="addFavoriteBtn" title="Add favorite" aria-label="Add favorite">
							+
						</button>
					</div>

					<div class="favorites-list" id="favoritesList">
						<div class="empty-state" id="favoritesEmptyState">
							<p>No favorites yet</p>
						</div>
					</div>
				</section>
			</div>
		</main>
	</div>

	<script src="clients-data.js"></script>
	<script src="otbm-writer.js"></script>
	<script src="app.js"></script>
</body>
</html>